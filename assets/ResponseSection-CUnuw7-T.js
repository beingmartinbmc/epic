import{j as s}from"./index-DwlOT8h5.js";import{R as f,r as x}from"./react-vendor-cxkclgJA.js";import{p as j,g as N}from"./app-core-BbHgm4eB.js";import"./prompts-CYrRfio8.js";const v=l=>{if(!l)return{quotes:[],summary:""};const c=[];let m="",t={};const a=l.split(`
`),h=a.length;for(let r=0;r<h;r++){const e=a[r].trim();if(e)if(e.startsWith("QUOTE:"))t.quote&&c.push({...t}),t={quote:e.substring(6).trim()};else if(e.startsWith("SOURCE:"))t.source=e.substring(7).trim();else if(e.startsWith("CONTEXT:"))t.context=e.substring(8).trim();else if(e.startsWith("SUMMARY:")){let i=e.substring(8).trim(),o=r+1;for(;o<h;){const n=a[o].trim();if(n&&(n.startsWith("QUOTE:")||n.startsWith("SOURCE:")||n.startsWith("CONTEXT:")))break;n&&(i+=" "+n),o++}m=i.trim(),r=o-1}else e.startsWith('"')&&e.endsWith('"')?(t.quote&&c.push({...t}),t={quote:e}):t.quote&&!t.source&&e.includes(":")?e.includes("Bhagavad Gita")||e.includes("Quran")||e.includes("Bible")||e.includes("Rigveda")||e.includes("Guru Granth Sahib")||e.includes("Tripitaka")?t.source=e:t.context=e:t.quote&&!t.context&&e.length>50&&(t.context=e)}if(t.quote&&c.push(t),c.length===0){const r=l.split(`

`),e=r.length;for(let i=0;i<e;i++){const n=r[i].split(`
`),d={};for(let p=0;p<n.length;p++){const u=n[p].trim();u.startsWith('"')&&u.endsWith('"')?d.quote=u:u.includes(":")?d.source=u:u.length>30&&(d.context=u)}d.quote&&c.push(d)}}return{quotes:c,summary:m}},b=f.memo(({response:l,isLoading:c})=>{const[m,t]=x.useState(null),a=x.useMemo(()=>v(l),[l]),h=x.useMemo(()=>a.quotes.map(e=>{const{bookName:i,chapter:o,verse:n}=j(e.source||""),d=N(i,`${o}:${n}`);return{...e,parsedSource:i,chapter:o,verse:n,referenceUrl:d}}),[a.quotes]),r=x.useCallback(async e=>{try{await navigator.clipboard.writeText(e),t(e),setTimeout(()=>t(null),2e3)}catch(i){console.error("Failed to copy quote:",i)}},[]);return c?s.jsx("div",{className:"response-section",children:s.jsxs("div",{className:"response-loading",children:[s.jsx("div",{className:"spinner-border text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading guidance..."})}),s.jsx("p",{className:"mt-3",children:"Seeking divine wisdom..."})]})}):l?s.jsxs("div",{className:"response-section",children:[h.length>0&&s.jsxs("div",{className:"quotes-section",children:[s.jsx("h3",{className:"quotes-title",children:"Sacred Wisdom"}),h.map((e,i)=>s.jsx("div",{className:"quote-card",children:s.jsxs("div",{className:"quote-content",children:[s.jsxs("div",{className:"quote-section",children:[s.jsx("h4",{className:"section-title",children:"Quote"}),s.jsx("blockquote",{className:"quote-text",children:e.quote})]}),s.jsxs("div",{className:"source-section",children:[s.jsx("h4",{className:"section-title",children:"Source"}),s.jsxs("div",{className:"source-content",children:[s.jsx("span",{className:"quote-source",children:e.parsedSource}),e.chapter&&e.verse&&s.jsxs("span",{className:"quote-reference",children:[e.chapter,":",e.verse]}),e.referenceUrl&&s.jsx("a",{href:e.referenceUrl,target:"_blank",rel:"noopener noreferrer",className:"quote-link",title:"View Reference",children:s.jsx("i",{className:"fas fa-external-link-alt"})})]})]}),e.context&&s.jsxs("div",{className:"context-section",children:[s.jsx("h4",{className:"section-title",children:"Context"}),s.jsx("div",{className:"context-content",children:e.context})]}),s.jsxs("div",{className:"quote-actions",children:[s.jsxs("button",{className:"btn btn-sm btn-outline-primary copy-btn",onClick:()=>r(e.quote),title:"Copy Quote",children:[s.jsx("i",{className:"fas fa-copy"}),m===e.quote?" Copied!":" Copy"]}),e.referenceUrl&&s.jsxs("button",{className:"btn btn-sm btn-outline-secondary reference-btn",onClick:()=>r(e.referenceUrl),title:"Copy Reference Link",children:[s.jsx("i",{className:"fas fa-link"}),m===e.referenceUrl?" Link Copied!":" Show Link"]})]})]})},`${i}-${e.quote.substring(0,50)}`))]}),a.summary&&s.jsxs("div",{className:"summary-section",children:[s.jsx("h3",{className:"summary-title",children:"Guidance Summary"}),s.jsx("div",{className:"summary-content",children:a.summary})]})]}):s.jsx("div",{className:"response-section",children:s.jsxs("div",{className:"response-placeholder",children:[s.jsx("div",{className:"placeholder-icon",children:"üôè"}),s.jsx("h3",{children:"Seek Divine Guidance"}),s.jsx("p",{children:"Share your question or concern, and receive wisdom from sacred texts."})]})})});b.displayName="ResponseSection";export{b as default};
