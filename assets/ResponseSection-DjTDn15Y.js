import{j as e}from"./index-ICWQ5jth.js";import{R as f,r as x}from"./react-vendor-cxkclgJA.js";import{c as N}from"./app-core-C9DIHIbd.js";import"./prompts-D1rsbfgq.js";const j=o=>{if(!o)return{quotes:[],summary:""};const a=[];let m="",i={};const u=o.split(`
`),h=u.length;for(let n=0;n<h;n++){const s=u[n].trim();if(s)if(s.startsWith("QUOTE:"))i.quote&&a.push({...i}),i={quote:s.substring(6).trim().replace(/\*\*/g,"")};else if(s.startsWith("SOURCE:"))i.source=s.substring(7).trim().replace(/\*\*/g,"");else if(s.startsWith("REFERENCE_URL:")){const c=s.substring(14).trim().replace(/\*\*/g,"").replace(/\s+/g," ");i.referenceUrl=c}else if(s.startsWith("CONTEXT:"))i.context=s.substring(8).trim();else if(s.startsWith("SUMMARY:")){let c=s.substring(8).trim(),t=n+1;for(;t<h;){const r=u[t].trim();if(r&&(r.startsWith("QUOTE:")||r.startsWith("SOURCE:")||r.startsWith("REFERENCE_URL:")||r.startsWith("CONTEXT:")))break;r&&(c+=" "+r),t++}m=c.trim(),n=t-1}else s.startsWith('"')&&s.endsWith('"')?(i.quote&&a.push({...i}),i={quote:s}):i.quote&&!i.source&&s.includes(":")?s.includes("Bhagavad Gita")||s.includes("Quran")||s.includes("Bible")||s.includes("Rigveda")||s.includes("Guru Granth Sahib")||s.includes("Tripitaka")?i.source=s:i.context=s:i.quote&&!i.context&&s.length>50&&(i.context=s)}if(i.quote&&a.push(i),a.length===0){const n=o.split(`

`),s=n.length;for(let c=0;c<s;c++){const r=n[c].split(`
`),d={};for(let p=0;p<r.length;p++){const l=r[p].trim();l.startsWith('"')&&l.endsWith('"')?d.quote=l:l.includes(":")?d.source=l:l.length>30&&(d.context=l)}d.quote&&a.push(d)}}return{quotes:a,summary:m}},W=f.memo(({response:o,isLoading:a,selectedText:m})=>{const[i,u]=x.useState(null),h=t=>{switch(t){case"BHAGAVAD_GITA":return"Hindu Wisdom";case"VEDAS":return"Vedic Wisdom";case"QURAN":return"Islamic Wisdom";case"BIBLE":return"Christian Wisdom";case"GURU_GRANTH_SAHIB":return"Sikh Wisdom";case"TRIPITAKA":return"Buddhist Wisdom";case"TAO_TE_CHING":return"Taoist Wisdom";case"ANALECTS_OF_CONFUCIUS":return"Confucian Wisdom";case"DHAMMAPADA":return"Buddhist Wisdom";case"UPANISHADS":return"Hindu Wisdom";case"TALMUD":return"Jewish Wisdom";case"AVESTA":return"Zoroastrian Wisdom";case"ALL":return"Sacred Wisdom";default:return"Sacred Wisdom"}},n=x.useMemo(()=>j(o),[o]),s=x.useMemo(()=>n.quotes.map((t,r)=>({...t,referenceUrl:N(t.referenceUrl),id:`quote-${r}-${t.quote?.substring(0,20)?.replace(/\s+/g,"-")||r}`})),[n.quotes]),c=x.useCallback(async t=>{try{await navigator.clipboard.writeText(t),u(t);const r=setTimeout(()=>u(null),2e3);return()=>clearTimeout(r)}catch(r){console.error("Failed to copy quote:",r)}},[]);return a?e.jsx("div",{className:"response-section",children:e.jsxs("div",{className:"response-loading",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading guidance..."})}),e.jsx("p",{className:"mt-3",children:"Seeking divine wisdom..."})]})}):o?e.jsxs("div",{className:"response-section",children:[s.length>0&&e.jsxs("div",{className:"quotes-section",children:[e.jsx("h3",{className:"quotes-title",children:h(m)}),s.map((t,r)=>e.jsx("div",{className:"quote-card",children:e.jsxs("div",{className:"quote-content",children:[e.jsxs("div",{className:"quote-section",children:[e.jsx("h4",{className:"section-title",children:"Quote"}),e.jsx("blockquote",{className:"quote-text",children:t.quote})]}),e.jsxs("div",{className:"source-section",children:[e.jsx("h4",{className:"section-title",children:"Source"}),e.jsxs("div",{className:"source-content",children:[e.jsx("span",{className:"quote-source",children:t.source}),t.referenceUrl&&e.jsx("a",{href:t.referenceUrl,target:"_blank",rel:"noopener noreferrer",className:"quote-link",title:"View Reference",children:e.jsx("i",{className:"fas fa-external-link-alt"})})]})]}),t.context&&e.jsxs("div",{className:"context-section",children:[e.jsx("h4",{className:"section-title",children:"Context"}),e.jsx("div",{className:"context-content",children:t.context})]}),e.jsx("div",{className:"quote-actions",children:e.jsxs("button",{className:"btn btn-sm btn-outline-primary copy-btn",onClick:()=>c(t.quote),title:"Copy Quote",children:[e.jsx("i",{className:"fas fa-copy"}),i===t.quote?" Copied!":" Copy"]})})]})},t.id))]}),n.summary&&e.jsxs("div",{className:"summary-section",children:[e.jsx("h3",{className:"summary-title",children:"Guidance Summary"}),e.jsx("div",{className:"summary-content",children:n.summary})]})]}):e.jsx("div",{className:"response-section",children:e.jsxs("div",{className:"response-placeholder",children:[e.jsx("div",{className:"placeholder-icon",children:"üôè"}),e.jsx("h3",{children:"Seek Divine Guidance"}),e.jsx("p",{children:"Share your question or concern, and receive wisdom from sacred texts."})]})})});W.displayName="ResponseSection";export{W as default};
