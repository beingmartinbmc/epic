import{j as s}from"./index-BgTAWg0B.js";import{R as f,r as x}from"./react-vendor-cxkclgJA.js";import{p as j,g as N}from"./app-core-BbHgm4eB.js";import"./prompts-zDXgwyPh.js";const g=d=>{if(!d)return{quotes:[],summary:""};const c=[];let u="",t={};const o=d.split(`
`),l=o.length;for(let a=0;a<l;a++){const e=o[a].trim();if(e)if(e.startsWith("QUOTE:"))t.quote&&c.push({...t}),t={quote:e.substring(6).trim()};else if(e.startsWith("SOURCE:"))t.source=e.substring(7).trim();else if(e.startsWith("CONTEXT:"))t.context=e.substring(8).trim();else if(e.startsWith("SUMMARY:")){let n=e.substring(8).trim(),i=a+1;for(;i<l;){const r=o[i].trim();if(r&&(r.startsWith("QUOTE:")||r.startsWith("SOURCE:")||r.startsWith("CONTEXT:")))break;r&&(n+=" "+r),i++}u=n.trim(),a=i-1}else e.startsWith('"')&&e.endsWith('"')?(t.quote&&c.push({...t}),t={quote:e}):t.quote&&!t.source&&e.includes(":")?e.includes("Bhagavad Gita")||e.includes("Quran")||e.includes("Bible")||e.includes("Rigveda")||e.includes("Guru Granth Sahib")||e.includes("Tripitaka")?t.source=e:t.context=e:t.quote&&!t.context&&e.length>50&&(t.context=e)}if(t.quote&&c.push(t),c.length===0){const a=d.split(`

`),e=a.length;for(let n=0;n<e;n++){const r=a[n].split(`
`),m={};for(let p=0;p<r.length;p++){const h=r[p].trim();h.startsWith('"')&&h.endsWith('"')?m.quote=h:h.includes(":")?m.source=h:h.length>30&&(m.context=h)}m.quote&&c.push(m)}}return{quotes:c,summary:u}},v=f.memo(({response:d,isLoading:c})=>{const[u,t]=x.useState(new Set),o=x.useMemo(()=>g(d),[d]),l=x.useMemo(()=>o.quotes.map(e=>{const{source:n,chapter:i,verse:r}=j(e.source||""),m=N(n,`${i}:${r}`);return{...e,parsedSource:n,chapter:i,verse:r,referenceUrl:m,isExpanded:u.has(e.quote)}}),[o.quotes,u]),a=x.useCallback(e=>{t(n=>{const i=new Set(n);return i.has(e)?i.delete(e):i.add(e),i})},[]);return x.useEffect(()=>{l.length>0&&u.size===0&&t(new Set([l[0].quote]))},[l.length,u.size]),c?s.jsx("div",{className:"response-section",children:s.jsxs("div",{className:"response-loading",children:[s.jsx("div",{className:"spinner-border text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading guidance..."})}),s.jsx("p",{className:"mt-3",children:"Seeking divine wisdom..."})]})}):d?s.jsxs("div",{className:"response-section",children:[l.length>0&&s.jsxs("div",{className:"quotes-section",children:[s.jsx("h3",{className:"quotes-title",children:"Sacred Wisdom"}),l.map((e,n)=>s.jsx("div",{className:"quote-card",children:s.jsxs("div",{className:"quote-content",children:[s.jsxs("blockquote",{className:"quote-text",children:['"',e.quote,'"']}),s.jsxs("div",{className:"quote-meta",children:[s.jsx("span",{className:"quote-source",children:e.parsedSource}),e.chapter&&e.verse&&s.jsxs("span",{className:"quote-reference",children:[e.chapter,":",e.verse]}),e.referenceUrl&&s.jsx("a",{href:e.referenceUrl,target:"_blank",rel:"noopener noreferrer",className:"quote-link",children:s.jsx("i",{className:"fas fa-external-link-alt"})})]}),e.context&&s.jsxs("div",{className:"quote-context",children:[s.jsxs("button",{className:"context-toggle",onClick:()=>a(e.quote),children:[e.isExpanded?"Hide Context":"Show Context",s.jsx("i",{className:`fas fa-chevron-${e.isExpanded?"up":"down"}`})]}),e.isExpanded&&s.jsx("div",{className:"context-content",children:e.context})]})]})},`${n}-${e.quote.substring(0,50)}`))]}),o.summary&&s.jsxs("div",{className:"summary-section",children:[s.jsx("h3",{className:"summary-title",children:"Guidance Summary"}),s.jsx("div",{className:"summary-content",children:o.summary})]})]}):s.jsx("div",{className:"response-section",children:s.jsxs("div",{className:"response-placeholder",children:[s.jsx("div",{className:"placeholder-icon",children:"üôè"}),s.jsx("h3",{children:"Seek Divine Guidance"}),s.jsx("p",{children:"Share your question or concern, and receive wisdom from sacred texts."})]})})});v.displayName="ResponseSection";export{v as default};
